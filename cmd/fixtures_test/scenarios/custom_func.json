[
    {
        "ID": "MOCK_ACCOUNT_CUSFUNC_ACCOUNT2",
        "runAfter": {
          "precondition": [],
          "blockWait": 0
        },
        "action": "mock_account",
        "paramsRef": "cusfunc_account2",
        "output": {
          "txResult": {
            "status": "Success"
          },
          "property": [
            {
              "owner": "cusfunc_account2",
              "coins": [
                {
                  "denom": "pylon",
                  "amount": 55000
                }
              ]
            }
          ]
        }
    },
    {
        "ID": "CREATE_CUSTOMFUNCTEST_COOKBOOK",
        "runAfter": {
            "precondition": [],
            "blockWait": 0
        },
        "action": "mock_cookbook",
        "paramsRef": "./cookbooks/custom_func.json",
        "output": {
            "txResult": {
                "status": "Success"
            },
            "property": [
                {
                    "owner": "cusfunc_account1",
                    "cookbooks": ["Custom function test"]
                }
            ]
        }
    },
    {
        "ID": "CREATE_CUSTOMFUNCTEST_ITEMS",  
        "runAfter": {
            "precondition": ["CREATE_CUSTOMFUNCTEST_COOKBOOK", "MOCK_ACCOUNT_CUSFUNC_ACCOUNT2"],
            "blockWait": 0
        },
        "action": "multi_msg_tx",
        "msgRefs": [
            {
                "action": "fiat_item",
                "paramsRef": "./items/custom_func/character.json"
            },
            {
                "action": "fiat_item",
                "paramsRef": "./items/custom_func/one_time_item.json"
            }
        ],
        "output": {
            "txResult": {
                "status": "Success"
            },
            "property": [
                {
                    "owner": "cusfunc_account2",
                    "items": [
                        {
                            "stringValues": { "Name": "Custom Function TestCharacter" }
                        },
                        {
                            "stringValues": { "Name": "One-time Item" }
                        }
                    ]
                }
            ]
        }
    },
    {
        "ID": "CREATE_CUSTOM_FUNC_RECIPES",
        "runAfter": {
            "precondition": ["CREATE_CUSTOMFUNCTEST_COOKBOOK"],
            "blockWait": 0
        },
        "action": "multi_msg_tx",
        "msgRefs": [
            {
                "action": "create_recipe",
                "paramsRef": "./recipes/custom_func/custom_func.json"
            },
            {
                "action": "create_recipe",
                "paramsRef": "./recipes/custom_func/execution_count_restriction.json"
            }
        ],
        "output": {
            "txResult": {
                "status": "Success"
            },
            "property": [
                {
                    "owner": "cusfunc_account1",
                    "recipes": [
                        "Growing HP Character Health Restore Recipe",
                        "Execution Count Restriction Recipe"
                    ]
                }
            ]
        }
    },
    {
        "ID": "EXECUTE_CHARACTER_CUSTOM_FUNC_TEST_RECIPE",        
        "runAfter": {
            "precondition": ["CREATE_CUSTOM_FUNC_RECIPES", "CREATE_CUSTOMFUNCTEST_ITEMS"],
            "blockWait": 0
        },
        "action": "execute_recipe",
        "paramsRef": "./recipes/custom_func/executions/custom_func.json",
        "output": {
            "txResult": {
                "status": "Success",
                "message": "scheduled the recipe"
            },
            "property": []
        }
    },
    {
        "ID": "CHECK_EXECUTION_CHARACTER_CUSTOM_FUNC_TEST_RECIPE",
        "runAfter": {
            "precondition": ["EXECUTE_CHARACTER_CUSTOM_FUNC_TEST_RECIPE"],
            "blockWait": 2
        },
        "action": "check_execution",
        "paramsRef": "./recipes/custom_func/check_executions/custom_func.json",
        "output": {
            "txResult": {
                "status": "Success",
                "message": "successfully completed the execution"
            },
            "property": [
                {
                    "owner": "cusfunc_account2",
                    "items": [
                        {
                            "stringValues": { "Name": "Custom Function TestCharacter" },
                            "dblValues": { "attack": "1034" },
                            "transferFee": "1200"
                        }
                    ]
                }
            ]
        }
    },
    {
        "ID": "EXECUTE_EXECUTION_COUNT_RESTRICTION_RECIPE1",        
        "runAfter": {
            "precondition": ["CREATE_CUSTOM_FUNC_RECIPES", "CREATE_CUSTOMFUNCTEST_ITEMS"],
            "blockWait": 0
        },
        "action": "execute_recipe",
        "paramsRef": "./recipes/custom_func/executions/execution_count_restriction.json",
        "output": {
            "txResult": {
                "status": "Success",
                "errLog": "",
                "broadcastError": ""
            },
            "property": []
        }
    },
    {
        "ID": "EXECUTE_EXECUTION_COUNT_RESTRICTION_RECIPE2",        
        "runAfter": {
            "precondition": ["EXECUTE_EXECUTION_COUNT_RESTRICTION_RECIPE1"],
            "blockWait": 0
        },
        "action": "execute_recipe",
        "paramsRef": "./recipes/custom_func/executions/execution_count_restriction.json",
        "output": {
            "txResult": {
                "errLog": "[0]th item does not match"
            },
            "property": []
        }
    }
]